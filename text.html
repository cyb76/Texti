<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Money Manager</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

*{
box-sizing:border-box;
font-family:Arial;
}

body{
margin:0;
background:#f1f5f9;
}

header{
background:#2563eb;
color:white;
padding:20px;
text-align:center;
}

.container{
padding:15px;
max-width:800px;
margin:auto;
}

.card{
background:white;
border-radius:12px;
padding:15px;
margin-bottom:15px;
box-shadow:0 4px 10px rgba(0,0,0,0.08);
}

.balance{
font-size:28px;
font-weight:bold;
text-align:center;
}

.summary{
display:flex;
justify-content:space-between;
margin-top:10px;
}

.summary div{
text-align:center;
flex:1;
}

.income{
color:green;
}

.expense{
color:red;
}

input,select{
width:100%;
padding:10px;
margin-top:8px;
border-radius:6px;
border:1px solid #ccc;
}

button{
width:100%;
padding:10px;
margin-top:10px;
background:#2563eb;
border:none;
color:white;
border-radius:6px;
cursor:pointer;
}

button:hover{
background:#1e40af;
}

.item{
display:flex;
justify-content:space-between;
border-bottom:1px solid #eee;
padding:8px;
}

.delete{
background:red;
color:white;
padding:4px 8px;
border-radius:4px;
cursor:pointer;
}

.dark{
background:#111827;
color:white;
}

.dark .card{
background:#1f2937;
}

.toggle{
background:#111;
}

</style>
</head>

<body>

<header>
<h2>Money Manager</h2>
</header>

<div class="container">

<button class="toggle" onclick="toggleDark()">Dark Mode</button>

<div class="card">

<div class="balance" id="balance">Rp 0</div>

<div class="summary">

<div>
<p>Pemasukan</p>
<b id="income">Rp 0</b>
</div>

<div>
<p>Pengeluaran</p>
<b id="expense">Rp 0</b>
</div>

</div>

</div>


<div class="card">

<h3>Tambah Transaksi</h3>

<input id="desc" placeholder="Keterangan">

<input id="amount" type="number" placeholder="Jumlah">

<select id="type">
<option value="income">Pemasukan</option>
<option value="expense">Pengeluaran</option>
</select>

<select id="category">
<option>Makan</option>
<option>Transport</option>
<option>Belanja</option>
<option>Tagihan</option>
<option>Hiburan</option>
<option>Lainnya</option>
</select>

<button onclick="add()">Tambah</button>

</div>


<div class="card">

<h3>Grafik Keuangan</h3>

<canvas id="chart"></canvas>

</div>


<div class="card">

<h3>Riwayat Transaksi</h3>

<div id="list"></div>

</div>

</div>

<script>

let data = JSON.parse(localStorage.getItem("money")) || [];

function add(){

let desc=document.getElementById("desc").value;
let amount=parseInt(document.getElementById("amount").value);
let type=document.getElementById("type").value;
let category=document.getElementById("category").value;

data.push({
desc,
amount,
type,
category,
date:new Date().toLocaleDateString()
});

localStorage.setItem("money",JSON.stringify(data));

render();

}

function render(){

let balance=0;
let income=0;
let expense=0;

let list=document.getElementById("list");

list.innerHTML="";

data.forEach((t,i)=>{

let div=document.createElement("div");

div.className="item";

div.innerHTML=`

<span>
${t.desc} (${t.category})<br>
<small>${t.date}</small>
</span>

<span class="${t.type}">
${t.type=="income"?"+":"-"}Rp ${t.amount}
</span>

<span class="delete" onclick="del(${i})">X</span>

`;

list.appendChild(div);

if(t.type=="income"){
balance+=t.amount;
income+=t.amount;
}else{
balance-=t.amount;
expense+=t.amount;
}

});

document.getElementById("balance").innerText="Rp "+balance;
document.getElementById("income").innerText="Rp "+income;
document.getElementById("expense").innerText="Rp "+expense;

drawChart(income,expense);

}

function del(i){

data.splice(i,1);

localStorage.setItem("money",JSON.stringify(data));

render();

}

let chart;

function drawChart(income,expense){

let ctx=document.getElementById("chart");

if(chart) chart.destroy();

chart=new Chart(ctx,{
type:"doughnut",
data:{
labels:["Pemasukan","Pengeluaran"],
datasets:[{
data:[income,expense],
backgroundColor:["green","red"]
}]
}
});

}

function toggleDark(){

document.body.classList.toggle("dark");

}

render();

</script>

</body>
</html>